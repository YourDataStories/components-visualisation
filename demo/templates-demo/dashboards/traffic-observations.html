<div class="container" ng-controller="TrafficObservationsController">
    <div class="row">
        <!--Title-->
        <div class="col-md-8">
            <h2>Traffic Observations</h2>
        </div>
        <!--Dashboard filter buttons-->
        <div class="col-md-4">
            <yds-clear-filters-button
                    dashboard-id="traffic_observation"
                    lang="en">
            </yds-clear-filters-button>

            <yds-dashboard-sharing
                    dashboard-id="traffic_observation"
                    lang="en">
            </yds-dashboard-sharing>
        </div>
    </div>

    <!--Description-->
    <div class="row">
        <div class="col-md-12">
            <p>Select points on the map, year and time ranges, vehicle types and traffic directions to
                filter the traffic observations and display details about them in the visualisations below.</p>
        </div>
    </div>

    <div class="row">
        <!--Map for point selection-->
        <div class="col-md-7">
            <yds-map
                    project-id="{{ galwayProjectId }}"
                    view-type="contract.trafficobservation.all"
                    enable-rating="true"
                    element-h="400"
                    max-cluster-radius="1"
                    clicked-point="selectedPoints"
                    selection-mode="multiple"
                    mouse-over-markers="true"
                    dashboard-id="traffic_observation"
                    selection-id="trafficobservation.on_points"
                    lang="{{ lang }}">
            </yds-map>
        </div>

        <!--Year/day/time sliders-->
        <div class="col-md-5">
            <div class="panel panel-default">
                <div class="panel-heading">Ranges</div>
                <div class="panel-body">
                    <!--Resource count bar chart-->
                    <yds-dashboard-updater
                            type="bar"
                            view-type="trafficobservation.resource.count.per.year"
                            dashboard-id="traffic_observation"
                            embeddable="false"
                            disable-explanation="true"
                            exporting="false"
                            min-height="100"
                            lang="{{ lang }}">
                    </yds-dashboard-updater>

                    <!--Start year-->
                    <yds-time-slider
                            type="year"
                            title="Start Year"
                            min-year="2009"
                            max-year="2018"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.start_year"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--End year-->
                    <yds-time-slider
                            type="year"
                            title="End Year"
                            min-year="2009"
                            max-year="2018"
                            default-value="2018"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.end_year"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--Start day-->
                    <yds-time-slider
                            type="day"
                            title="Start Day"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.start_day"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--End day-->
                    <yds-time-slider
                            type="day"
                            title="End Day"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.end_day"
                            default-value="Sunday"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--Start time-->
                    <yds-time-slider
                            type="time"
                            title="Start Time"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.start_time"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--End time-->
                    <yds-time-slider
                            type="time"
                            title="End Time"
                            dashboard-id="traffic_observation"
                            selection-type="trafficobservation.end_time"
                            default-value="1439"
                            lang="{{ lang }}">
                    </yds-time-slider>

                    <!--Minutes gap slider-->
                    <yds-time-slider
                            type="minutes"
                            title="Time Gap"
                            dashboard-id="traffic_observation"
                            min-year="15"
                            max-year="60"
                            selection-type="trafficobservation.gap"
                            default-value="15"
                            lang="{{ lang }}">
                    </yds-time-slider>
                </div>
            </div>
        </div>
    </div>

    <!--Comboboxes for vehicle type & traffic direction-->
    <div class="row" style="margin-top: 5px">
        <div class="col-md-offset-2 col-md-4">
            <yds-combobox-selector
                    title="Vehicle Type"
                    type="vehicleType.label.en"
                    selection-type="trafficobservation.vehicle_type">
            </yds-combobox-selector>
        </div>
        <div class="col-md-4">
            <yds-combobox-selector
                    title="Direction"
                    type="directed.label.en"
                    selection-type="trafficobservation.direction">
            </yds-combobox-selector>
        </div>
    </div>

    <div class="row" style="margin-top: 15px">
        <!--Selected filters-->
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading dashboard-info-panel-heading">
                    <h3 class="panel-title">Your selected filters</h3>
                </div>

                <div class="panel-body dashboard-info-container-default">
                    <yds-dashboard-updater
                            type="info-vertical"
                            view-type="trafficobservation.filters.selected"
                            dashboard-id="traffic_observation"
                            min-height="250"
                            lang="{{ lang }}">
                    </yds-dashboard-updater>
                </div>
            </div>
        </div>

        <!--Selected map points grid-->
        <div class="col-md-8">
            <div class="panel panel-default">
                <div class="panel-heading dashboard-info-panel-heading">
                    <h3 class="panel-title">Selected Traffic Observation Points</h3>
                </div>

                <div class="panel-body dashboard-info-container-default">
                    <yds-dashboard-updater
                            type="info-vertical"
                            project-id="none"
                            view-type="trafficobservation.points.selected"
                            dashboard-id="traffic_observation"
                            min-height="250"
                            base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                            lang="{{ lang }}">
                    </yds-dashboard-updater>
                </div>
            </div>
        </div>
    </div>

    <!--Bar charts & selected filters-->
    <div class="row" style="margin-top: 30px">
        <!--Bar chart 1-->
        <div class="col-md-6">
            <yds-dashboard-updater
                    type="bar"
                    project-id="none"
                    view-type="trafficobservation.per.weekday.over.year"
                    dashboard-id="traffic_observation"
                    min-height="300"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    enable-rating="{{ enableRating }}"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>

        <!--Bar chart 2-->
        <div class="col-md-6">
            <yds-dashboard-updater
                    type="bar"
                    project-id="none"
                    view-type="trafficobservation.per.year.over.vehicle.type"
                    dashboard-id="traffic_observation"
                    min-height="300"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    enable-rating="{{ enableRating }}"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>
    </div>

    <!--Line charts with traffic per direction-->
    <div class="row" style="margin-top: 30px">
        <!--Direction combobox 1-->
        <div class="col-md-6">
            <yds-combobox-selector
                    title="Directions (1)"
                    type="directed.label.en"
                    selection-type="trafficobservation.direction1">
            </yds-combobox-selector>
        </div>
        <!--Direction combobox 2-->
        <div class="col-md-6">
            <yds-combobox-selector
                    title="Directions (2)"
                    type="directed.label.en"
                    selection-type="trafficobservation.direction2">
            </yds-combobox-selector>
        </div>
    </div>
    <div class="row">
        <!--Line chart 1-->
        <div class="col-md-6">
            <yds-dashboard-updater
                    type="line"
                    project-id="none"
                    view-type="trafficobservation.per.direction.time.vehicle.type"
                    dashboard-id="traffic_observation_line1"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    min-height="400"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>
        <!--Line chart 2-->
        <div class="col-md-6">
            <yds-dashboard-updater
                    type="line"
                    project-id="none"
                    view-type="trafficobservation.per.direction.time.vehicle.type"
                    dashboard-id="traffic_observation_line2"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    min-height="400"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>
    </div>

    <!--Traffic observations per direction & time grid-->
    <div class="row" style="margin-top: 15px">
        <div class="col-md-12">
            <h3>Traffic Observations by Vehicle Type</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <yds-dashboard-updater
                    type="simple-grid"
                    project-id="none"
                    view-type="trafficobservation.per.direction.time.vehicle.type"
                    dashboard-id="traffic_observation"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    min-height="400"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>
    </div>

    <!--Traffic observations component-->
    <div class="row" style="margin-top: 25px">
        <div class="col-md-12">
            <h3>Traffic per day of the week, across years</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="table-responsive">
                <yds-dashboard-updater
                        type="traffic-observation"
                        project-id="none"
                        view-type="trafficobservation.per.weekday.over.year"
                        dashboard-id="traffic_observation"
                        min-height="355"
                        enable-selection="false"
                        lang="{{ lang }}">
                </yds-dashboard-updater>
            </div>
        </div>
    </div>

    <!--Traffic observations list grid-->
    <div class="row">
        <div class="col-md-12">
            <h3>Traffic Observations</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <yds-dashboard-updater
                    type="grid-paging"
                    view-type="trafficobservation.listitems.for.filters"
                    dashboard-id="traffic_observation"
                    add-to-basket="true"
                    base-url="http://ydsdev.iit.demokritos.gr/YDSComponents/#!/redirect"
                    min-height="400"
                    lang="{{ lang }}">
            </yds-dashboard-updater>
        </div>
    </div>

    <!--Related contracts grid-->
    <div class="row" style="margin-top: 35px">
        <div class="col-md-offset-2 col-md-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Contracts related to selected Observation Points
                </div>
                <div class="panel-body" style="padding-bottom: 30px;">
                    <yds-dashboard-updater
                            type="grid-paging"
                            project-id="none"
                            view-type="contract.for.trafficobservation"
                            dashboard-id="traffic_observation"
                            add-to-basket="true"
                            enable-grid-view-btn="true"
                            min-height="300"
                            lang="{{ lang }}">
                    </yds-dashboard-updater>
                </div>
            </div>
        </div>
    </div>

    <!--Basket-->
    <yds-basket-preview
            user-id="ydsUser">
    </yds-basket-preview>
</div>
